<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"
	xmlns:aop="http://www.springframework.org/schema/aop" 
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
	http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd 
	http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd">

    <dubbo:application name="demo-provider" owner="sun" organization="huoq"/>

    <dubbo:registry address="zookeeper://127.0.0.1:2181"/>

    <dubbo:protocol name="dubbo" dispatcher="connection" iothreads="5" accesslog="false" serialization="hessian2" port="20800" threadpool="fixed" threads="2" />
    
    <bean id="aService" class="com.sun.dubbo.service.AServiceImpl"></bean>
    <dubbo:service interface="com.sun.dubbo.service.AService" ref="aService" connections="50" actives="5000" cluster="failover"/>
 	<dubbo:reference id="aServiceDubbo" interface="com.sun.dubbo.service.AService"/>
 	
 	<bean id="bService" class="com.sun.dubbo.service.BServiceImpl"></bean>
    <dubbo:service interface="com.sun.dubbo.service.BService" ref="bService" connections="50" actives="5000" cluster="failover"/>
 	<dubbo:reference id="bServiceDubbo" interface="com.sun.dubbo.service.BService"/>
 	
 	<bean id="cService" class="com.sun.dubbo.service.CServiceImpl"></bean>
    <dubbo:service interface="com.sun.dubbo.service.CService" ref="cService" connections="50" actives="5000" cluster="failover"/>
 	<dubbo:reference id="cServiceDubbo" interface="com.sun.dubbo.service.CService"/>
 	
 	<bean id="traceFilter" class="com.sun.dubbo.filter.TraceFilter" />
	<aop:config>
		<aop:pointcut id="tracePoint" expression="execution(* com.sun.dubbo.service.*.sayHi(..))" />
		<aop:advisor pointcut-ref="tracePoint" advice-ref="traceFilter" />
	</aop:config>
</beans>